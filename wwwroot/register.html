<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>BooksHub</title>

  <link href="assets/img/logo title.png" rel="icon">
  <link href="assets/img/logo title.png" rel="apple-touch-icon">

  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/css/main.css" rel="stylesheet">
  <link href="assets/css/loginandregister.css" rel="stylesheet">
</head>

<body>
  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container position-relative d-flex align-items-center justify-content-between">
      <a href="welcome.html" class="logo d-flex align-items-center me-auto me-xl-0">
        <h1 class="sitename">BooksHub</h1>
      </a>
    </div>
  </header>

  <div class="container-body">
    <div class="graphic">
      <img src="assets/img/logo bookshub.png" alt="Reading Graphic" />
    </div>

    <div class="login-form">
      <h2>Sign Up</h2>

      <form id="registerForm">
        <div class="form-group">
          <input type="text" id="name" placeholder="Full Name" required />
        </div>

        <div class="form-group">
          <input type="text" id="username" placeholder="Username" required />
        </div>

        <div class="form-group">
          <input type="email" id="email" placeholder="Email Address" required />
        </div>

        <div class="form-group">
          <input type="password" id="password" placeholder="Password" required />
        </div>

        <button class="login-btn" type="submit">Enter</button>
      </form>

      <div class="extra-links">
        <a href="login.html">Back To Login Page</a>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('registerForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const data = {
        name: document.getElementById('name').value,
        username: document.getElementById('username').value,
        email: document.getElementById('email').value,
        password: document.getElementById('password').value
      };

      fetch('/api/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      .then(response => {
        if (response.ok) {
          return response.json();
        } else {
          return response.text().then(text => { throw new Error(text); });
        }
      })
      .then(result => {
        console.log("Success:", result);
        window.location.href = "choose-avatar.html";
      })
      .catch(error => {
        console.error("Registration error:", error);
        alert("التسجيل فشل " + error.message);
      });
    });
  </script>
</body>
</html>
